# å¼•è¨€ {#sec-intro .unnumbered}

```{r}
#| echo: false
source("_common.R")
```

æ•°æ®ç§‘å­¦æ˜¯ä¸€é—¨æ¿€åŠ¨äººå¿ƒçš„å­¦ç§‘ï¼Œå®ƒèƒ½è®©ä½ å°†åŸå§‹æ•°æ®è½¬åŒ–ä¸ºç†è§£ã€æ´å¯Ÿå’ŒçŸ¥è¯†ã€‚
ã€ŠR æ•°æ®ç§‘å­¦ã€‹çš„ç›®æ ‡æ˜¯å¸®åŠ©ä½ å­¦ä¹  R ä¸­æœ€é‡è¦çš„å·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿé«˜æ•ˆã€å¯é‡å¤åœ°è¿›è¡Œæ•°æ®ç§‘å­¦å®è·µï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­è·å¾—ä¸€äº›ä¹è¶£ ğŸ˜ƒã€‚
è¯»å®Œæœ¬ä¹¦åï¼Œä½ å°†æ‹¥æœ‰ä½¿ç”¨ R çš„ç²¾åéƒ¨åˆ†æ¥åº”å¯¹å„ç§æ•°æ®ç§‘å­¦æŒ‘æˆ˜çš„å·¥å…·ã€‚

## ä½ å°†å­¦åˆ°ä»€ä¹ˆ

æ•°æ®ç§‘å­¦æ˜¯ä¸€ä¸ªå¹¿é˜”çš„é¢†åŸŸï¼Œä¸å¯èƒ½é€šè¿‡é˜…è¯»ä¸€æœ¬ä¹¦å°±å®Œå…¨æŒæ¡ã€‚
æœ¬ä¹¦æ—¨åœ¨ä¸ºä½ æ‰“ä¸‹åšå®çš„åŸºç¡€ï¼Œè®©ä½ æŒæ¡æœ€é‡è¦çš„å·¥å…·ï¼Œå¹¶å…·å¤‡è¶³å¤Ÿçš„çŸ¥è¯†ä»¥ä¾¿åœ¨å¿…è¦æ—¶å¯»æ‰¾èµ„æºè¿›è¡Œæ›´æ·±å…¥çš„å­¦ä¹ ã€‚
æˆ‘ä»¬å¯¹å…¸å‹æ•°æ®ç§‘å­¦é¡¹ç›®æ­¥éª¤çš„æ¨¡å‹å¦‚ @fig-ds-diagram æ‰€ç¤ºã€‚

```{r}
#| label: fig-ds-diagram
#| echo: false
#| fig-cap: |
#|   åœ¨æˆ‘ä»¬çš„æ•°æ®ç§‘å­¦æµç¨‹æ¨¡å‹ä¸­ï¼Œä½ ä»æ•°æ®å¯¼å…¥å’Œæ•´ç†å¼€å§‹ã€‚æ¥ä¸‹æ¥ï¼Œé€šè¿‡è½¬æ¢ã€å¯è§†åŒ–å’Œå»ºæ¨¡çš„è¿­ä»£å¾ªç¯æ¥ç†è§£ä½ çš„æ•°æ®ã€‚æœ€åï¼Œé€šè¿‡å‘ä»–äººæ²Ÿé€šä½ çš„ç»“æœæ¥å®Œæˆæ•´ä¸ªè¿‡ç¨‹ã€‚
#| fig-alt: |
#|   ä¸€ä¸ªå±•ç¤ºæ•°æ®ç§‘å­¦å‘¨æœŸçš„å›¾è¡¨ï¼šå¯¼å…¥ -> æ•´ç† -> ç†è§£ï¼ˆè¯¥é˜¶æ®µåŒ…å«ä¸€ä¸ªå¾ªç¯ï¼šè½¬æ¢ -> å¯è§†åŒ– -> å»ºæ¨¡ï¼‰-> æ²Ÿé€šã€‚æ‰€æœ‰è¿™äº›éƒ½è¢«â€œç¼–ç¨‹â€æ‰€å›´ç»•ã€‚
#| out.width: NULL
knitr::include_graphics("diagrams/data-science/base.png", dpi = 270)
```

é¦–å…ˆï¼Œä½ å¿…é¡»å°†æ•°æ®**å¯¼å…¥** (import) åˆ° R ä¸­ã€‚
è¿™é€šå¸¸æ„å‘³ç€ä½ å°†å­˜å‚¨åœ¨æ–‡ä»¶ã€æ•°æ®åº“æˆ–ç½‘ç»œåº”ç”¨ç¨‹åºæ¥å£ (API) ä¸­çš„æ•°æ®åŠ è½½åˆ° R çš„ä¸€ä¸ªæ•°æ®æ¡† (data frame) ä¸­ã€‚
å¦‚æœä½ ä¸èƒ½å°†æ•°æ®å¯¼å…¥ Rï¼Œä½ å°±æ— æ³•å¯¹å®ƒè¿›è¡Œæ•°æ®ç§‘å­¦åˆ†æï¼

ä¸€æ—¦å¯¼å…¥äº†æ•°æ®ï¼Œä¸€ä¸ªå¥½ä¸»æ„æ˜¯å°†å…¶**æ•´ç†** (tidy)ã€‚
æ•´ç†æ•°æ®æ„å‘³ç€å°†å…¶ä»¥ä¸€ç§ä¸€è‡´çš„å½¢å¼å­˜å‚¨ï¼Œä½¿å…¶å­˜å‚¨æ–¹å¼ä¸æ•°æ®é›†çš„è¯­ä¹‰ç›¸åŒ¹é…ã€‚
ç®€è€Œè¨€ä¹‹ï¼Œå½“ä½ çš„æ•°æ®æ˜¯æ•´æ´çš„æ—¶ï¼Œæ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªè§‚æµ‹ã€‚
æ•´æ´æ•°æ®å¾ˆé‡è¦ï¼Œå› ä¸ºä¸€è‡´çš„ç»“æ„å¯ä»¥è®©ä½ ä¸“æ³¨äºå›ç­”å…³äºæ•°æ®çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯è´¹åŠ›åœ°å°†æ•°æ®è°ƒæ•´æˆé€‚åˆä¸åŒå‡½æ•°çš„å½¢å¼ã€‚

ä¸€æ—¦ä½ æœ‰äº†æ•´æ´çš„æ•°æ®ï¼Œé€šå¸¸çš„ä¸‹ä¸€æ­¥æ˜¯è¿›è¡Œ**è½¬æ¢** (transform)ã€‚
è½¬æ¢åŒ…æ‹¬ç­›é€‰å‡ºæ„Ÿå…´è¶£çš„è§‚æµ‹ï¼ˆæ¯”å¦‚æŸä¸ªåŸå¸‚çš„æ‰€æœ‰äººæˆ–å»å¹´çš„æ‰€æœ‰æ•°æ®ï¼‰ï¼Œåˆ›å»ºä½œä¸ºç°æœ‰å˜é‡å‡½æ•°çš„æ–°å˜é‡ï¼ˆæ¯”å¦‚æ ¹æ®è·ç¦»å’Œæ—¶é—´è®¡ç®—é€Ÿåº¦ï¼‰ï¼Œä»¥åŠè®¡ç®—ä¸€ç»„æ±‡æ€»ç»Ÿè®¡é‡ï¼ˆæ¯”å¦‚è®¡æ•°æˆ–å‡å€¼ï¼‰ã€‚
æ•´ç†å’Œè½¬æ¢ä¸€èµ·è¢«ç§°ä¸º**æ•°æ®æ•´ç†** (wrangling)ï¼Œå› ä¸ºå°†æ•°æ®å˜æˆæ˜“äºå¤„ç†çš„å½¢å¼é€šå¸¸æ„Ÿè§‰åƒä¸€åœºæˆ˜æ–—ï¼

ä¸€æ—¦ä½ æ‹¥æœ‰äº†åŒ…å«æ‰€éœ€å˜é‡çš„æ•´æ´æ•°æ®ï¼ŒçŸ¥è¯†ç”Ÿæˆçš„ä¸¤å¤§å¼•æ“ä¾¿æ˜¯ï¼šå¯è§†åŒ–å’Œå»ºæ¨¡ã€‚
è¿™ä¸¤è€…å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå› æ­¤ä»»ä½•çœŸå®çš„æ•°æ®åˆ†æéƒ½ä¼šåœ¨å®ƒä»¬ä¹‹é—´å¤šæ¬¡è¿­ä»£ã€‚

**å¯è§†åŒ–** (Visualization) æœ¬è´¨ä¸Šæ˜¯ä¸€ç§äººç±»æ´»åŠ¨ã€‚
ä¸€å¹…å¥½çš„å¯è§†åŒ–å›¾è¡¨ä¼šå‘ä½ å±•ç¤ºæ„æƒ³ä¸åˆ°çš„ä¸œè¥¿ï¼Œæˆ–å¼•å‘å…³äºæ•°æ®çš„æ–°é—®é¢˜ã€‚
ä¸€å¹…å¥½çš„å¯è§†åŒ–å›¾è¡¨ä¹Ÿå¯èƒ½æš—ç¤ºä½ é—®é”™äº†é—®é¢˜ï¼Œæˆ–è€…ä½ éœ€è¦æ”¶é›†ä¸åŒçš„æ•°æ®ã€‚
å¯è§†åŒ–å¯ä»¥ç»™ä½ å¸¦æ¥æƒŠå–œï¼Œä½†å®ƒä»¬çš„æ‰©å±•æ€§ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦äººç±»æ¥è§£è¯»ã€‚

**æ¨¡å‹** (Models) æ˜¯å¯è§†åŒ–çš„è¡¥å……å·¥å…·ã€‚
ä¸€æ—¦ä½ æŠŠé—®é¢˜å®šä¹‰å¾—è¶³å¤Ÿç²¾ç¡®ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å‹æ¥å›ç­”å®ƒä»¬ã€‚
æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯æ•°å­¦æˆ–è®¡ç®—å·¥å…·ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸å…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§ã€‚
å³ä½¿æ‰©å±•æ€§ä¸å¥½ï¼Œè´­ä¹°æ›´å¤šçš„è®¡ç®—æœºé€šå¸¸ä¹Ÿæ¯”é›‡ä½£æ›´å¤šçš„å¤§è„‘è¦ä¾¿å®œï¼
ä½†æ˜¯ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æœ‰å…¶å‡è®¾ï¼Œè€Œæ¨¡å‹æœ¬èº«æ— æ³•è´¨ç–‘è‡ªå·±çš„å‡è®¾ã€‚
è¿™æ„å‘³ç€æ¨¡å‹æœ¬è´¨ä¸Šæ— æ³•ç»™ä½ å¸¦æ¥æƒŠå–œã€‚

æ•°æ®ç§‘å­¦çš„æœ€åä¸€æ­¥æ˜¯**æ²Ÿé€š** (communication)ï¼Œè¿™æ˜¯ä»»ä½•æ•°æ®åˆ†æé¡¹ç›®ä¸­éƒ½è‡³å…³é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚
é™¤éä½ èƒ½å°†ä½ çš„ç»“æœä¼ è¾¾ç»™ä»–äººï¼Œå¦åˆ™æ— è®ºä½ çš„æ¨¡å‹å’Œå¯è§†åŒ–è®©ä½ å¯¹æ•°æ®ç†è§£å¾—å¤šä¹ˆé€å½»ï¼Œéƒ½æ˜¯ä¸å¤Ÿçš„ã€‚

å›´ç»•æ‰€æœ‰è¿™äº›å·¥å…·çš„æ˜¯**ç¼–ç¨‹** (programming)ã€‚
ç¼–ç¨‹æ˜¯ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„å·¥å…·ï¼Œä½ åœ¨æ•°æ®ç§‘å­¦é¡¹ç›®çš„å‡ ä¹æ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šç”¨åˆ°å®ƒã€‚
ä½ ä¸éœ€è¦æˆä¸ºç¼–ç¨‹ä¸“å®¶æ‰èƒ½æˆä¸ºä¸€åæˆåŠŸçš„æ•°æ®ç§‘å­¦å®¶ï¼Œä½†å­¦ä¹ æ›´å¤šå…³äºç¼–ç¨‹çš„çŸ¥è¯†æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºæˆä¸ºä¸€åæ›´å¥½çš„ç¨‹åºå‘˜å¯ä»¥è®©ä½ è‡ªåŠ¨åŒ–å¸¸è§ä»»åŠ¡ï¼Œå¹¶æ›´è½»æ¾åœ°è§£å†³æ–°é—®é¢˜ã€‚

ä½ ä¼šåœ¨æ¯ä¸ªæ•°æ®ç§‘å­¦é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œä½†å¯¹äºå¤§å¤šæ•°é¡¹ç›®æ¥è¯´ï¼Œå®ƒä»¬è¿˜ä¸å¤Ÿã€‚
è¿™é‡Œæœ‰ä¸€ä¸ªç²—ç•¥çš„ 80/20 æ³•åˆ™åœ¨èµ·ä½œç”¨ï¼šä½ å¯ä»¥ç”¨æœ¬ä¹¦ä¸­å­¦åˆ°çš„å·¥å…·å¤„ç†æ¯ä¸ªé¡¹ç›®ä¸­å¤§çº¦ 80% çš„å·¥ä½œï¼Œä½†ä½ éœ€è¦å…¶ä»–å·¥å…·æ¥å¤„ç†å‰©ä¸‹çš„ 20%ã€‚
åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä¼šä¸ºä½ æŒ‡å‡ºå¯ä»¥å­¦ä¹ æ›´å¤šçŸ¥è¯†çš„èµ„æºã€‚

## æœ¬ä¹¦çš„ç»„ç»‡ç»“æ„

å‰é¢å¯¹æ•°æ®ç§‘å­¦å·¥å…·çš„æè¿°å¤§è‡´æ˜¯æŒ‰ç…§ä½ åœ¨åˆ†æä¸­ä½¿ç”¨çš„é¡ºåºæ¥ç»„ç»‡çš„ï¼ˆå½“ç„¶ï¼Œä½ ä¼šå¤šæ¬¡è¿­ä»£è¿™äº›æ­¥éª¤ï¼‰ã€‚
ç„¶è€Œï¼Œæ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œé¦–å…ˆå­¦ä¹ æ•°æ®å¯¼å…¥å’Œæ•´ç†å¹¶éæœ€ä½³é€‰æ‹©ï¼Œå› ä¸º 80% çš„æƒ…å†µä¸‹è¿™ä¸ªè¿‡ç¨‹æ˜¯å¸¸è§„è€Œä¹å‘³çš„ï¼Œè€Œå¦å¤– 20% çš„æƒ…å†µåˆ™æ˜¯æ€ªå¼‚ä¸”ä»¤äººæ²®ä¸§çš„ã€‚
è¿™å¯¹äºå¼€å§‹å­¦ä¹ ä¸€ä¸ªæ–°ä¸»é¢˜æ¥è¯´æ˜¯ä¸ªç³Ÿç³•çš„èµ·ç‚¹ï¼
å› æ­¤ï¼Œæˆ‘ä»¬å°†ä»å·²ç»å¯¼å…¥å’Œæ•´ç†å¥½çš„æ•°æ®çš„å¯è§†åŒ–å’Œè½¬æ¢å¼€å§‹ã€‚
è¿™æ ·ï¼Œå½“ä½ å¯¼å…¥å’Œæ•´ç†è‡ªå·±çš„æ•°æ®æ—¶ï¼Œä½ çš„åŠ¨åŠ›ä¼šä¿æŒé«˜æ¶¨ï¼Œå› ä¸ºä½ çŸ¥é“è¿™äº›è¾›è‹¦æ˜¯å€¼å¾—çš„ã€‚

åœ¨æ¯ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬éƒ½å°½é‡éµå¾ªä¸€ä¸ªä¸€è‡´çš„æ¨¡å¼ï¼šä»ä¸€äº›æ¿€åŠ±æ€§çš„ä¾‹å­å¼€å§‹ï¼Œè®©ä½ çœ‹åˆ°å…¨å±€ï¼Œç„¶åæ·±å…¥ç»†èŠ‚ã€‚
ä¹¦çš„æ¯ä¸ªéƒ¨åˆ†éƒ½é…æœ‰ç»ƒä¹ ï¼Œä»¥å¸®åŠ©ä½ å®è·µæ‰€å­¦ã€‚
è™½ç„¶è·³è¿‡ç»ƒä¹ å¯èƒ½å¾ˆè¯±äººï¼Œä½†æ²¡æœ‰æ¯”é€šè¿‡è§£å†³å®é™…é—®é¢˜æ›´å¥½çš„å­¦ä¹ æ–¹æ³•äº†ã€‚

## ä½ ä¸ä¼šå­¦åˆ°ä»€ä¹ˆ

æœ¬ä¹¦æ²¡æœ‰æ¶µç›–å‡ ä¸ªé‡è¦çš„ä¸»é¢˜ã€‚
æˆ‘ä»¬è®¤ä¸ºï¼Œä¸¥æ ¼ä¸“æ³¨äºåŸºæœ¬è¦ç´ ï¼Œä»¥ä¾¿ä½ èƒ½å°½å¿«ä¸Šæ‰‹ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚
è¿™æ„å‘³ç€æœ¬ä¹¦æ— æ³•æ¶µç›–æ‰€æœ‰é‡è¦çš„ä¸»é¢˜ã€‚

### å»ºæ¨¡

å»ºæ¨¡å¯¹äºæ•°æ®ç§‘å­¦æ¥è¯´éå¸¸é‡è¦ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰è¶³å¤Ÿçš„ç¯‡å¹…ç»™äºˆå®ƒåº”æœ‰çš„ä»‹ç»ã€‚
è¦äº†è§£æ›´å¤šå…³äºå»ºæ¨¡çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èæˆ‘ä»¬çš„åŒäº‹ Max Kuhn å’Œ Julia Silge æ’°å†™çš„[ã€ŠTidy Modeling with Rã€‹](https://www.tmwr.org)ã€‚
è¿™æœ¬ä¹¦å°†æ•™ä½  tidymodels ç³»åˆ—åŒ…ï¼Œæ­£å¦‚ä½ å¯èƒ½ä»åå­—ä¸­çŒœåˆ°çš„é‚£æ ·ï¼Œå®ƒä»¬ä¸æˆ‘ä»¬åœ¨æœ¬ä¹¦ä¸­ä½¿ç”¨çš„ tidyverse ç³»åˆ—åŒ…å…±äº«è®¸å¤šçº¦å®šã€‚

### å¤§æ•°æ®

æœ¬ä¹¦è‡ªè±ªåœ°ä¸»è¦å…³æ³¨å°å‹çš„ã€å†…å­˜ä¸­çš„æ•°æ®é›†ã€‚
è¿™æ˜¯ä¸€ä¸ªæ­£ç¡®çš„èµ·ç‚¹ï¼Œå› ä¸ºå¦‚æœä½ æ²¡æœ‰å¤„ç†å°æ•°æ®çš„ç»éªŒï¼Œä½ å°±æ— æ³•å¤„ç†å¤§æ•°æ®ã€‚
ä½ å°†åœ¨æœ¬ä¹¦å¤§éƒ¨åˆ†å†…å®¹ä¸­å­¦åˆ°çš„å·¥å…·å¯ä»¥è½»æ¾å¤„ç†æ•°ç™¾å…†å­—èŠ‚çš„æ•°æ®ï¼Œç¨åŠ æ³¨æ„ï¼Œä½ é€šå¸¸å¯ä»¥ç”¨å®ƒä»¬æ¥å¤„ç†å‡ å‰å­—èŠ‚çš„æ•°æ®ã€‚
æˆ‘ä»¬è¿˜å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä»æ•°æ®åº“å’Œ parquet æ–‡ä»¶ä¸­è·å–æ•°æ®ï¼Œè¿™ä¸¤ç§æ ¼å¼éƒ½å¸¸ç”¨äºå­˜å‚¨å¤§æ•°æ®ã€‚
ä½ å¯èƒ½æ— æ³•å¤„ç†æ•´ä¸ªæ•°æ®é›†ï¼Œä½†è¿™ä¸æˆé—®é¢˜ï¼Œå› ä¸ºä½ é€šå¸¸åªéœ€è¦ä¸€ä¸ªå­é›†æˆ–å­æ ·æœ¬æ¥å›ç­”ä½ æ„Ÿå…´è¶£çš„é—®é¢˜ã€‚

å¦‚æœä½ ç»å¸¸å¤„ç†æ›´å¤§æ•°æ®ï¼ˆæ¯”å¦‚ 10-100 GBï¼‰ï¼Œæˆ‘ä»¬å»ºè®®ä½ å­¦ä¹ æ›´å¤šå…³äº [data.table](https://github.com/Rdatatable/data.table) çš„çŸ¥è¯†ã€‚
æˆ‘ä»¬åœ¨è¿™é‡Œä¸æ•™å®ƒï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸ tidyverse ä¸åŒçš„æ¥å£ï¼Œå¹¶éœ€è¦ä½ å­¦ä¹ ä¸€äº›ä¸åŒçš„çº¦å®šã€‚
ç„¶è€Œï¼Œå®ƒçš„é€Ÿåº¦å¿«å¾—ä»¤äººéš¾ä»¥ç½®ä¿¡ï¼Œå¦‚æœä½ å¤„ç†çš„æ˜¯å¤§æ•°æ®ï¼Œé‚£ä¹ˆèŠ±æ—¶é—´å­¦ä¹ å®ƒæ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºæ€§èƒ½ä¸Šçš„å›æŠ¥æ˜¯å·¨å¤§çš„ã€‚

### Python, Julia, åŠå…¶ä»–

åœ¨æœ¬ä¹¦ä¸­ï¼Œä½ ä¸ä¼šå­¦åˆ°ä»»ä½•å…³äº Pythonã€Julia æˆ–å…¶ä»–å¯ç”¨äºæ•°æ®ç§‘å­¦çš„ç¼–ç¨‹è¯­è¨€çš„çŸ¥è¯†ã€‚
è¿™å¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬è®¤ä¸ºè¿™äº›å·¥å…·ä¸å¥½ã€‚
å®ƒä»¬å¾ˆå¥½ï¼
åœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°æ•°æ®ç§‘å­¦å›¢é˜Ÿä¼šæ··åˆä½¿ç”¨å¤šç§è¯­è¨€ï¼Œé€šå¸¸è‡³å°‘åŒ…æ‹¬ R å’Œ Pythonã€‚
ä½†æˆ‘ä»¬åšä¿¡ï¼Œä¸€æ¬¡åªç²¾é€šä¸€ä¸ªå·¥å…·æ˜¯æœ€å¥½çš„ï¼Œè€Œ R æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚

## å…ˆå†³æ¡ä»¶

ä¸ºäº†è®©ä½ èƒ½ä»æœ¬ä¹¦ä¸­è·å¾—æœ€å¤§æ”¶ç›Šï¼Œæˆ‘ä»¬å¯¹ä½ å·²æœ‰çš„çŸ¥è¯†åšäº†ä¸€äº›å‡è®¾ã€‚
ä½ åº”è¯¥å…·å¤‡åŸºæœ¬çš„æ•°å­¦ç´ å…»ï¼Œå¦‚æœä½ å·²ç»æœ‰ä¸€äº›åŸºç¡€çš„ç¼–ç¨‹ç»éªŒï¼Œé‚£å°†å¾ˆæœ‰å¸®åŠ©ã€‚
å¦‚æœä½ ä»¥å‰ä»æœªç¼–ç¨‹è¿‡ï¼Œä½ å¯èƒ½ä¼šå‘ç° Garrett çš„ [ã€ŠHands on Programming with Rã€‹](https://rstudio-education.github.io/hopr/) æ˜¯æœ¬ä¹¦çš„ä¸€ä¸ªæœ‰ä»·å€¼çš„è¡¥å……è¯»ç‰©ã€‚

è¦è¿è¡Œæœ¬ä¹¦ä¸­çš„ä»£ç ï¼Œä½ éœ€è¦å››æ ·ä¸œè¥¿ï¼šRã€RStudioã€ä¸€ä¸ªåä¸º **tidyverse** çš„ R åŒ…é›†åˆï¼Œä»¥åŠå°‘æ•°å…¶ä»–åŒ…ã€‚
åŒ…æ˜¯å¯é‡å¤ R ä»£ç çš„åŸºæœ¬å•ä½ã€‚
å®ƒä»¬åŒ…å«å¯é‡ç”¨çš„å‡½æ•°ã€æè¿°å¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„æ–‡æ¡£ä»¥åŠç¤ºä¾‹æ•°æ®ã€‚

### R

è¦ä¸‹è½½ Rï¼Œè¯·è®¿é—® CRANï¼Œå³**ç»¼åˆ R å­˜æ¡£ç½‘ç»œ** (**c**omprehensive **R** **a**rchive **n**etwork)ï¼Œç½‘å€æ˜¯ [https://cloud.r-project.org](https://cloud.r-project.org)ã€‚
R æ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°çš„ä¸»ç‰ˆæœ¬ï¼Œæ¯å¹´è¿˜æœ‰ 2-3 ä¸ªæ¬¡è¦ç‰ˆæœ¬å‘å¸ƒã€‚
å®šæœŸæ›´æ–°æ˜¯ä¸ªå¥½ä¸»æ„ã€‚
å‡çº§å¯èƒ½ä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦é‡æ–°å®‰è£…æ‰€æœ‰åŒ…çš„ä¸»ç‰ˆæœ¬ï¼Œä½†æ‹–å»¶åªä¼šè®©æƒ…å†µå˜å¾—æ›´ç³Ÿã€‚
æˆ‘ä»¬å»ºè®®ä¸ºæœ¬ä¹¦ä½¿ç”¨ R 4.2.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

### RStudio

RStudio æ˜¯ä¸€ä¸ªç”¨äº R ç¼–ç¨‹çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œä½ å¯ä»¥ä» [https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/) ä¸‹è½½ã€‚
RStudio æ¯å¹´æ›´æ–°å‡ æ¬¡ï¼Œå½“æœ‰æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é€šçŸ¥ä½ ï¼Œæ‰€ä»¥ä¸éœ€è¦è‡ªå·±å»æ£€æŸ¥ã€‚
å®šæœŸå‡çº§ä»¥åˆ©ç”¨æœ€æ–°æœ€å¥½çš„åŠŸèƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚
å¯¹äºæœ¬ä¹¦ï¼Œè¯·ç¡®ä¿ä½ è‡³å°‘æ‹¥æœ‰ RStudio 2022.02.0 ç‰ˆæœ¬ã€‚

å½“ä½ å¯åŠ¨ RStudio æ—¶ï¼ˆè§ @fig-rstudio-consoleï¼‰ï¼Œä½ ä¼šåœ¨ç•Œé¢ä¸­çœ‹åˆ°ä¸¤ä¸ªå…³é”®åŒºåŸŸï¼šæ§åˆ¶å° (console) çª—æ ¼å’Œè¾“å‡º (output) çª—æ ¼ã€‚
ç°åœ¨ï¼Œä½ åªéœ€è¦çŸ¥é“åœ¨æ§åˆ¶å°çª—æ ¼ä¸­è¾“å…¥ R ä»£ç å¹¶æŒ‰ Enter é”®æ¥è¿è¡Œå®ƒã€‚
éšç€å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šäº†è§£æ›´å¤šã€‚[^1]

```{r}
#| label: fig-rstudio-console
#| echo: false
#| out-width: ~
#| fig-cap: |
#|   RStudio IDE æœ‰ä¸¤ä¸ªå…³é”®åŒºåŸŸï¼šåœ¨å·¦ä¾§çš„æ§åˆ¶å° (console) çª—æ ¼ä¸­é”®å…¥ R ä»£ç ï¼Œåœ¨å³ä¾§çš„è¾“å‡º (output) çª—æ ¼ä¸­æŸ¥çœ‹å›¾è¡¨ã€‚
#| fig-alt: |
#|   RStudio IDE çš„æˆªå›¾ï¼Œå…¶ä¸­æ§åˆ¶å°å’Œè¾“å‡ºçª—æ ¼è¢«é«˜äº®æ˜¾ç¤ºã€‚
knitr::include_graphics("diagrams/rstudio/console.png", dpi = 270)
```

### The tidyverse

ä½ è¿˜éœ€è¦å®‰è£…ä¸€äº› R åŒ…ã€‚
R **åŒ…** (package) æ˜¯ä¸€ä¸ªé›†å‡½æ•°ã€æ•°æ®å’Œæ–‡æ¡£äºä¸€ä½“çš„é›†åˆï¼Œå®ƒæ‰©å±•äº†åŸºç¡€ R çš„åŠŸèƒ½ã€‚
ä½¿ç”¨åŒ…æ˜¯æˆåŠŸä½¿ç”¨ R çš„å…³é”®ã€‚
ä½ å°†åœ¨æœ¬ä¹¦ä¸­å­¦åˆ°çš„å¤§å¤šæ•°åŒ…éƒ½æ˜¯æ‰€è°“çš„ tidyverse çš„ä¸€éƒ¨åˆ†ã€‚
tidyverse ä¸­çš„æ‰€æœ‰åŒ…éƒ½å…±äº«ä¸€ä¸ªå…±åŒçš„æ•°æ®å’Œ R ç¼–ç¨‹å“²å­¦ï¼Œå¹¶ä¸”è¢«è®¾è®¡ä¸ºå¯ä»¥ååŒå·¥ä½œã€‚

ä½ å¯ä»¥ç”¨ä¸€è¡Œä»£ç å®‰è£…å®Œæ•´çš„ tidyverseï¼š

```{r}
#| eval: false
install.packages("tidyverse")
```

åœ¨ä½ çš„è®¡ç®—æœºä¸Šï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥è¿™è¡Œä»£ç ï¼Œç„¶åæŒ‰ Enter é”®è¿è¡Œå®ƒã€‚
R å°†ä» CRAN ä¸‹è½½è¿™äº›åŒ…å¹¶å®‰è£…åˆ°ä½ çš„è®¡ç®—æœºä¸Šã€‚

åœ¨ä½ ç”¨ `library()` åŠ è½½ä¸€ä¸ªåŒ…ä¹‹å‰ï¼Œä½ å°†æ— æ³•ä½¿ç”¨è¯¥åŒ…ä¸­çš„å‡½æ•°ã€å¯¹è±¡æˆ–å¸®åŠ©æ–‡ä»¶ã€‚
ä¸€æ—¦ä½ å®‰è£…äº†ä¸€ä¸ªåŒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨ `library()` å‡½æ•°æ¥åŠ è½½å®ƒï¼š

```{r}
library(tidyverse)
```

è¿™å‘Šè¯‰ä½  tidyverse åŠ è½½äº†ä¹ä¸ªåŒ…ï¼šdplyrã€forcatsã€ggplot2ã€lubridateã€purrrã€readrã€stringrã€tibbleã€tidyrã€‚
è¿™äº›è¢«è®¤ä¸ºæ˜¯ tidyverse çš„**æ ¸å¿ƒ**ï¼Œå› ä¸ºä½ åœ¨å‡ ä¹æ¯ä¸ªåˆ†æä¸­éƒ½ä¼šä½¿ç”¨å®ƒä»¬ã€‚

tidyverse ä¸­çš„åŒ…å˜åŒ–ç›¸å½“é¢‘ç¹ã€‚
ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `tidyverse_update()` æ¥æŸ¥çœ‹æ˜¯å¦æœ‰å¯ç”¨çš„æ›´æ–°ã€‚

### å…¶ä»–åŒ…

è¿˜æœ‰è®¸å¤šå…¶ä»–ä¼˜ç§€çš„åŒ…ä¸å±äº tidyverseï¼Œå› ä¸ºå®ƒä»¬è§£å†³ä¸åŒé¢†åŸŸçš„é—®é¢˜ï¼Œæˆ–è€…åŸºäºä¸€å¥—ä¸åŒçš„åŸºæœ¬åŸåˆ™è®¾è®¡ã€‚
è¿™å¹¶ä¸èƒ½è¯´æ˜å®ƒä»¬æ˜¯æ›´å¥½è¿˜æ˜¯æ›´å·®ï¼Œåªæ˜¯å®ƒä»¬ä¸åŒã€‚
æ¢å¥è¯è¯´ï¼Œtidyverse çš„è¡¥å……ä¸æ˜¯ messyverse (æ··ä¹±å®‡å®™)ï¼Œè€Œæ˜¯è®¸å¤šå…¶ä»–ç›¸äº’å…³è”çš„åŒ…çš„å®‡å®™ã€‚
éšç€ä½ ç”¨ R å¤„ç†æ›´å¤šçš„æ•°æ®ç§‘å­¦é¡¹ç›®ï¼Œä½ å°†å­¦ä¹ æ–°çš„åŒ…å’Œæ–°çš„æ•°æ®æ€ç»´æ–¹å¼ã€‚

æˆ‘ä»¬å°†åœ¨æœ¬ä¹¦ä¸­ä½¿ç”¨è®¸å¤šæ¥è‡ª tidyverse ä¹‹å¤–çš„åŒ…ã€‚
ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹åŒ…ï¼Œå› ä¸ºå®ƒä»¬ä¸ºæˆ‘ä»¬å­¦ä¹  R çš„è¿‡ç¨‹æä¾›äº†æœ‰è¶£çš„æ•°æ®é›†ï¼š

```{r}
#| eval: false
install.packages(
    c(
        "arrow", "babynames", "curl", "duckdb", "gapminder",
        "ggrepel", "ggridges", "ggthemes", "hexbin", "janitor", "Lahman",
        "leaflet", "maps", "nycflights13", "openxlsx", "palmerpenguins",
        "repurrrsive", "tidymodels", "writexl"
    )
)
```

æˆ‘ä»¬è¿˜å°†ä¸ºä¸€äº›ä¸ªåˆ«ä¾‹å­ä½¿ç”¨ä¸€äº›å…¶ä»–çš„åŒ…ã€‚
ä½ ç°åœ¨ä¸éœ€è¦å®‰è£…å®ƒä»¬ï¼Œåªéœ€è®°ä½ï¼Œå½“ä½ çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯æ—¶ï¼š

```{r}
#| eval: false
library(ggrepel)
#> Error in library(ggrepel) : there is no package called â€˜ggrepelâ€™
```

ä½ éœ€è¦è¿è¡Œ `install.packages("ggrepel")` æ¥å®‰è£…è¿™ä¸ªåŒ…ã€‚

## è¿è¡Œ R ä»£ç 

ä¸Šä¸€èŠ‚å‘ä½ å±•ç¤ºäº†å‡ ä¸ªè¿è¡Œ R ä»£ç çš„ä¾‹å­ã€‚
ä¹¦ä¸­çš„ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š

```{r}
#| eval: true
1 + 2
```

å¦‚æœä½ åœ¨æœ¬åœ°æ§åˆ¶å°ä¸­è¿è¡ŒåŒæ ·çš„ä»£ç ï¼Œå®ƒä¼šçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š

```
> 1 + 2
[1] 3
```

è¿™é‡Œæœ‰ä¸¤ä¸ªä¸»è¦åŒºåˆ«ã€‚
åœ¨ä½ çš„æ§åˆ¶å°ä¸­ï¼Œä½ åœ¨ `>`ï¼ˆç§°ä¸º**æç¤ºç¬¦** (prompt)ï¼‰åé¢è¾“å…¥ï¼›æˆ‘ä»¬åœ¨ä¹¦ä¸­ä¸æ˜¾ç¤ºæç¤ºç¬¦ã€‚
åœ¨ä¹¦ä¸­ï¼Œè¾“å‡ºç”¨ `#>` æ³¨é‡Šæ‰ï¼›åœ¨ä½ çš„æ§åˆ¶å°ä¸­ï¼Œå®ƒç›´æ¥å‡ºç°åœ¨ä½ çš„ä»£ç ä¹‹åã€‚
è¿™ä¸¤ä¸ªåŒºåˆ«æ„å‘³ç€ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨æœ¬ä¹¦çš„ç”µå­ç‰ˆï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»ä¹¦ä¸­å¤åˆ¶ä»£ç å¹¶ç²˜è´´åˆ°æ§åˆ¶å°ä¸­ã€‚

åœ¨å…¨ä¹¦ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å¥—ä¸€è‡´çš„çº¦å®šæ¥å¼•ç”¨ä»£ç ï¼š

  - å‡½æ•°ä»¥ä»£ç å­—ä½“æ˜¾ç¤ºï¼Œå¹¶åè·Ÿæ‹¬å·ï¼Œå¦‚ `sum()` æˆ– `mean()`ã€‚

  - å…¶ä»– R å¯¹è±¡ï¼ˆå¦‚æ•°æ®æˆ–å‡½æ•°å‚æ•°ï¼‰ä»¥ä»£ç å­—ä½“æ˜¾ç¤ºï¼Œä¸å¸¦æ‹¬å·ï¼Œå¦‚ `flights` æˆ– `x`ã€‚

  - æœ‰æ—¶ï¼Œä¸ºäº†æ¸…æ¥šåœ°è¡¨æ˜ä¸€ä¸ªå¯¹è±¡æ¥è‡ªå“ªä¸ªåŒ…ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åŒ…ååè·Ÿä¸¤ä¸ªå†’å·ï¼Œå¦‚ `dplyr::mutate()` æˆ– `nycflights13::flights`ã€‚
    è¿™ä¹Ÿæ˜¯æœ‰æ•ˆçš„ R ä»£ç ã€‚

## è‡´è°¢

æœ¬ä¹¦ä¸ä»…æ˜¯ Hadleyã€Mine å’Œ Garrett çš„æˆæœï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸ R ç¤¾åŒºä¸­è®¸å¤šäººè¿›è¡Œå¤šæ¬¡å¯¹è¯ï¼ˆçº¿ä¸Šå’Œçº¿ä¸‹ï¼‰çš„ç»“æœã€‚
æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä¸å¤§å®¶çš„æ¯ä¸€æ¬¡äº¤æµï¼›éå¸¸æ„Ÿè°¢ä½ ä»¬ï¼

```{r}
#| eval: false
#| echo: false
library(tidyverse)
contribs_all_json <- gh::gh("/repos/:owner/:repo/contributors",
    owner = "hadley",
    repo = "r4ds",
    .limit = Inf
)
contribs_all <- tibble(
    login = contribs_all_json |> map_chr("login"),
    n = contribs_all_json |> map_int("contributions")
)

contribs_old <- read_csv("contributors.csv", col_types = list())
contribs_new <- contribs_all |> anti_join(contribs_old, by = "login")

# Get info for new contributors
needed_json <- map(
    contribs_new$login,
    ~ gh::gh("/users/:username", username = .x),
    .progress = TRUE
)
info_new <- tibble(
    login = contribs_new$login,
    name = map_chr(needed_json, "name", .default = NA),
    blog = map_chr(needed_json, "blog", .default = NA)
)
info_old <- contribs_old |> select(login, name, blog)
info_all <- bind_rows(info_old, info_new)

contribs_all <- contribs_all |>
    left_join(info_all, by = "login") |>
    mutate(login_lowercase = str_to_lower(login)) |>
    arrange(login_lowercase) |>
    select(-login_lowercase)
write_csv(contribs_all, "contributors.csv")
```

```{r}
#| results: asis
#| echo: false
#| message: false
library(dplyr)
contributors <- readr::read_csv("contributors.csv")
contributors <- contributors |>
    filter(!login %in% c("hadley", "garrettgman", "mine-cetinkaya-rundel")) |>
    mutate(
        login = paste0("\\@", login),
        desc = ifelse(is.na(name), login, paste0(name, " (", login, ")"))
    )

cat("æœ¬ä¹¦æ˜¯å¼€æ”¾å¼å†™ä½œçš„ï¼Œè®¸å¤šäººé€šè¿‡æ‹‰å–è¯·æ±‚ (pull request) åšå‡ºäº†è´¡çŒ®ã€‚ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰ ", nrow(contributors), " ä½é€šè¿‡ GitHub æ‹‰å–è¯·æ±‚ï¼ˆæŒ‰ç”¨æˆ·åçš„å­—æ¯é¡ºåºæ’åˆ—ï¼‰è´¡çŒ®æ”¹è¿›çš„è¯»è€…ï¼š", sep = "")
cat(paste0(contributors$desc, collapse = ", "))
cat(".\n")
```

## ç‰ˆæœ¬è¯´æ˜

æœ¬ä¹¦çš„åœ¨çº¿ç‰ˆæœ¬å¯åœ¨ [https://r4ds.hadley.nz](https://r4ds.hadley.nz) æŸ¥çœ‹ã€‚
åœ¨å®ä½“ä¹¦çš„å†ç‰ˆä¹‹é—´ï¼Œå®ƒä¼šæŒç»­æ›´æ–°ã€‚
æœ¬ä¹¦çš„æºä»£ç å¯åœ¨ [https://github.com/hadley/r4ds](https://github.com/hadley/r4ds) è·å–ã€‚
æœ¬ä¹¦ç”± [Quarto](https://quarto.org) é©±åŠ¨ï¼Œè¿™ä½¿å¾—ç¼–å†™ç»“åˆæ–‡æœ¬å’Œå¯æ‰§è¡Œä»£ç çš„ä¹¦ç±å˜å¾—å®¹æ˜“ã€‚

```{r}
#| eval: false
#| echo: false
#| results: asis
pkgs <- sessioninfo::package_info(
    tidyverse:::tidyverse_packages(),
    dependencies = FALSE
)
df <- tibble(
    package = pkgs$package,
    version = pkgs$ondiskversion,
    source = gsub("@", "\\\\@", pkgs$source)
)
knitr::kable(df, format = "markdown")
```

```{r}
#| include: false
cli:::ruler()
```

[^1]:
    å¦‚æœä½ æƒ³å…¨é¢äº†è§£ RStudio çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¯·å‚é˜… RStudio ç”¨æˆ·æŒ‡å—ï¼š[https://docs.posit.co/ide/user](https://docs.posit.co/ide/user)ã€‚
